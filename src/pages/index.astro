---
import Layout from "../layouts/Layout.astro";
import OrganizationCard from "../components/home/OrganizationCard.astro";
import FilterSidebar from "../components/FilterSidebar.astro";

const API_BASE_URL = import.meta.env.API_BASE_URL;
const response = await fetch(`${API_BASE_URL}/orgs`);
const allOrganizations = await response.json();
---

<Layout title="LFX Mentorship">
  <div class="bg-dark-blue">
    <h1 class="Orgs">Participating Organizations</h1>
    <div class="relative">
      <div class="codeBlock absolute"></div>
    </div>
    <FilterSidebar />
    <ul
      role="list"
      class="flex flex-wrap justify-center gap-[5px] ml-80px] mr-[80px] md-4 w-full"
    >
      {
        allOrganizations.map((org: Organization) => (
          <OrganizationCard {...org} />
        ))
      }
    </ul>
  </div>
</Layout>

<style>
  .Orgs {
    color: white;
    text-align: center;
    font-size: 2.25rem;
    line-height: 2.5rem;
    font-weight: 600;
    padding-bottom: 2rem;
  }
  .codeBlock {
    position: absolute;
    width: 300px;
    height: 300px;
    left: calc(50% - 230px / 2 - 78px);
    top: calc(50% - 257.05px / 2 - 47.47px);
    border-radius: 100%;
    background: linear-gradient(
      118.19deg,
      #02101a -3.62%,
      hsl(210, 94%, 21%) 55.44%,
      #0077cc 110.51%
    );
    opacity: 0.2;
    filter: blur(34px);
    transform: matrix(1, 0, -0.03, 1, 0, 0);
  }
</style>
